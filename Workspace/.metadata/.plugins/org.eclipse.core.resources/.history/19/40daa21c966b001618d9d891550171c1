import regex 
import numpy as np
from gensim.models import Word2Vec
import codecs
class PhonemeEmbeddings(object):
    def __init__(self,pathToASJPCorpusFile):
        for i,line in enumerate(codecs.open(pathToASJPCorpusFile,"r","utf-8")):
            if i > 0:
                line = line.split("\t")
                if "PROTO" not in line[0] and "ARTIFICIAL" not in line[2] and "FAKE" not in line[2]:
                    words_tmp = line[10:]
                    #remove invalid characters
                    for i,word in enumerate(words_tmp):
                        words_tmp[i] = words_tmp[i].replace("%","")
                        words_tmp[i] = words_tmp[i].replace(" ","")              
                        words_tmp[i] = words_tmp[i].replace("\r","")
                        words_tmp[i] = words_tmp[i].replace("\n","")
        
                    for i_w,word in enumerate(words_tmp):
                        if len(getListofASJPPhonemes(word)) > 0:
                            
                                        
                            """
                            for cells with more than one corresponding word, only take first one
                            """
                            if "," in word:
                                word_splitted = word.split(",")
                                if len(getListofASJPPhonemes(word_splitted[0])) > 0:
                                    
                                    allWords.append(word_splitted[0])
                                else:
                                    allWords.append(word_splitted[1])
                            else:
                                allWords.append(word)
                            
                            concepts.append(i_w)
                            geo_info.append([float(line[5]),float(line[6])])
                            languages.append(line[0])